<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>ã‚«ãƒ¼ãƒˆä¸€è¦§ | æ¨ã—ç³»é£Ÿã¹ç‰©é€šè²©ã‚µã‚¤ãƒˆ</title>
Â  <style>
Â  Â  body {
Â  Â  Â  background-color: #ffd9ef; /* æ¨ã—ã‚«ãƒ©ãƒ¼(ãƒ”ãƒ³ã‚¯) */
Â  Â  Â  color: #2f4f2f; /* ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆã‚°ãƒªãƒ¼ãƒ³ */
Â  Â  Â  font-family: 'Inter', Arial, sans-serif;
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  }

Â  Â  main {
Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  max-width: 900px;
Â  Â  Â  Â  margin: 0 auto;
Â  Â  }

Â  Â  /* --- Header Style --- (ãƒ‡ã‚¶ã‚¤ãƒ³æ”¹å–„) */
Â  Â  header {
Â  Â  Â  Â  background-color: #159450;
Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  box-shadow: 0 0 10px rgba(0,0,0,0.3); /* ã‚ˆã‚Šæ¿ƒã„å½± */
Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  }
Â  Â  header img.home-icon, header .user-icon {
Â  Â  Â  Â  width: 40px;
Â  Â  Â  Â  height: 40px;
Â  Â  Â  Â  border-radius: 50%; /* æ­£å††ã« */
Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  transition: transform 0.3s;
Â  Â  Â  Â  object-fit: cover; /* ç”»åƒãŒæ­ªã¾ãªã„ã‚ˆã†ã« */
Â  Â  }
Â  Â  header img.home-icon:hover {
Â  Â  Â  Â  transform: rotate(5deg);
Â  Â  }
Â  Â  header .user-icon:hover {
Â  Â  Â  Â  transform: scale(1.1);
Â  Â  }
Â  Â  header h1 {
Â  Â  Â  Â  color: white;
Â  Â  Â  Â  font-size: 1.8em;
Â  Â  Â  Â  margin: 0 0 0 15px;
Â  Â  Â  Â  flex-grow: 1;
Â  Â  }
Â  Â  header .left {
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  align-items: center;
Â  Â  }

Â  Â  /* --- Button Style --- */
Â  Â  a.btn, button[type="submit"] {
Â  Â  Â  Â  background-color: #fff;
Â  Â  Â  Â  color: #2f4f2f;
Â  Â  Â  Â  border: 2px solid #2f4f2f;
Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  margin: 5px;
Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  transition: background-color 0.3s, color 0.3s, transform 0.1s;
Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
Â  Â  }
Â  Â  a.btn:hover {
Â  Â  Â  Â  background-color: #2f4f2f;
Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  transform: translateY(-1px);
Â  Â  }
Â  Â  a.btn.primary { /* ãƒ¬ã‚¸ã«é€²ã‚€ãƒœã‚¿ãƒ³ */
Â  Â  Â  Â  background-color: #2f4f2f;
Â  Â  Â  Â  color: white;
Â  Â  Â  Â  border-color: #2f4f2f;
Â  Â  Â  Â  font-weight: bold;
Â  Â  }
Â  Â  a.btn.primary:hover {
Â  Â  Â  Â  background-color: #159450;
Â  Â  Â  Â  border-color: #159450;
Â  Â  }

Â  Â  /* ====================================
Â  Â  Â  Â  Â  Â 2. ãƒšãƒ¼ã‚¸å›ºæœ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« (cart_list.html)
Â  Â  Â  Â  Â  Â ==================================== */
Â  Â  .cart-container {
Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  color: #2f4f2f;
Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  background-color: #fff;
Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  box-shadow: 0 8px 16px rgba(0,0,0,0.1);
Â  Â  Â  Â  max-width: 800px;
Â  Â  Â  Â  margin-left: auto;
Â  Â  Â  Â  margin-right: auto;
Â  Â  }

Â  Â  table {
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  margin: 20px auto 0;
Â  Â  Â  Â  border-collapse: collapse;
Â  Â  Â  Â  table-layout: fixed;
Â  Â  }
Â  Â  th, td {
Â  Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  Â  padding: 12px;
Â  Â  Â  Â  text-align: center;
Â  Â  }
Â  Â  th {
Â  Â  Â  Â  background-color: #b2d8b2;
Â  Â  Â  Â  color: #2f4f2f;
Â  Â  Â  Â  font-weight: 600;
Â  Â  }
Â  Â  tbody tr:nth-child(even) {
Â  Â  Â  Â  background-color: #f8f8f8;
Â  Â  }
Â  Â  tbody tr:hover {
Â  Â  Â  Â  background-color: #e6f7e6;
Â  Â  }
Â  Â  .total-row td {
Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  background-color: #e6f7e6 !important;
Â  Â  Â  Â  border-top: 2px solid #2f4f2f;
Â  Â  Â  Â  font-size: 1.1em;
Â  Â  Â  Â  color: #2f4f2f;
Â  Â  }
Â  Â  .delete-btn {
Â  Â  Â  Â  background-color: #dc3545;
Â  Â  Â  Â  color: white;
Â  Â  Â  Â  padding: 8px 12px;
Â  Â  Â  Â  border: none;
Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  font-size: 0.9em;
Â  Â  Â  Â  transition: background-color 0.3s;
Â  Â  }
Â  Â  .delete-btn:hover {
Â  Â  Â  Â  background-color: #c82333;
Â  Â  }

Â  Â  /* ====================================
Â  Â  Â  Â  Â  Â 3. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
Â  Â  Â  Â  Â  Â ==================================== */
Â  Â  @media screen and (max-width: 768px) {
Â  Â  Â  Â  main {
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .cart-container {
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  table, thead, tbody, th, td, tr {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  }
Â  Â  Â  Â  thead { display: none; } /* ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’éè¡¨ç¤º */

Â  Â  Â  Â  td {
Â  Â  Â  Â  Â  Â  /* ã‚«ãƒ¼ãƒ‰å½¢å¼ã§è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°èª¿æ•´ */
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  padding-left: 50%;
Â  Â  Â  Â  Â  Â  text-align: right;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #eee;
Â  Â  Â  Â  }

Â  Â  Â  Â  td::before {
Â  Â  Â  Â  Â  Â  /* ãƒ©ãƒ™ãƒ«ã¨ã—ã¦thã®å½¹å‰²ã‚’æœãŸã™ */
Â  Â  Â  Â  Â  Â  content: attr(data-label);
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  left: 6px;
Â  Â  Â  Â  Â  Â  width: 45%;
Â  Â  Â  Â  Â  Â  padding-right: 10px;
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: #2f4f2f;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* å„è¡Œã‚’ã‚«ãƒ¼ãƒ‰ã®ã‚ˆã†ã«è¦‹ã›ã‚‹ */
Â  Â  Â  Â  tbody tr {
Â  Â  Â  Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
Â  Â  Â  Â  }
Â  Â  Â  Â  /* åˆè¨ˆè¡Œã®èª¿æ•´ */
Â  Â  Â  Â  .total-row td {
Â  Â  Â  Â  Â  Â  text-align: right;
Â  Â  Â  Â  Â  Â  padding-left: 10px; /* ãƒ©ãƒ™ãƒ«ã‚’éè¡¨ç¤ºã«ã™ã‚‹ãŸã‚ */
Â  Â  Â  Â  }
Â  Â  Â  Â  .total-row td::before {
Â  Â  Â  Â  Â  Â  content: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  .total-row td:first-child {
Â  Â  Â  Â  Â  Â  text-align: right;
Â  Â  Â  Â  Â  Â  font-size: 1.1em;
Â  Â  Â  Â  Â  Â  border-bottom: none;
Â  Â  Â  Â  }
Â  Â  }
Â  </style>
</head>
<body>
Â  Â  <!-- å…±é€šãƒ˜ãƒƒãƒ€ãƒ¼ (å…ƒã®ã¾ã¾ç¶­æŒ) -->
Â  Â  <header>
Â  Â  Â  Â  <div class="left">
Â  Â  Â  Â  Â  Â  <a th:href="@{/}">
Â  Â  Â  Â  Â  Â  Â  Â  <img src="/images/homebotan.jpg" alt="ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹" class="home-icon" />
Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  <h1>OshiGiftBox</h1>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="user-links">
Â  Â  Â  Â  Â  Â  <a th:href="@{/users/auth_select}">
Â  Â  Â  Â  Â  Â  Â  Â  <img src="/images/yuza.jpg" alt="ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²" class="user-icon" />
Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  </div>
Â  Â  </header>
Â  Â  <main>
Â  Â  Â  Â  <h1 style="text-align: center; color: #888; margin-top: 0; font-size: 2em; letter-spacing: 1px;">ã‚«ãƒ¼ãƒˆä¸€è¦§</h1>

Â  Â  <div class="cart-container">
Â  Â  Â  Â  <h2 style="color: #2f4f2f; font-size: 1.5em; margin-bottom: 20px;">ğŸ›’ ç¾åœ¨ã®ã‚«ãƒ¼ãƒˆå†…å®¹</h2>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <!-- ğŸ’¡ ä¿®æ­£: th:with ã§åˆè¨ˆã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®å¤‰æ•°ã‚’ã€é›†è¨ˆé–¢æ•°ã‚’ä½¿ã£ã¦ä¸€åº¦ã«è¨ˆç®—ã™ã‚‹ -->
Â  Â  Â  Â  <th:block th:with="totalPrice=${#lists.isEmpty(cartItems) ? 0 : #aggregates.sum(cartItems.![product.price * quantity])}">

Â  Â  Â  Â  <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
Â  Â  Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th style="text-align: left; width: 40%;">å•†å“å</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th style="text-align: right; width: 15%;">å˜ä¾¡</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th style="text-align: center; width: 10%;">æ•°é‡</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th style="text-align: right; width: 20%;">å°è¨ˆ</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th style="text-align: center; width: 15%;">æ“ä½œ</th>
Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  Â  Â  Â  <!-- th:each ã®ãƒ«ãƒ¼ãƒ—ã€‚ã“ã“ã§ã¯å°è¨ˆã®ã¿è¨ˆç®— -->
Â  Â  Â  Â  Â  Â  Â  Â  <tr th:each="item : ${cartItems}"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  th:with="subtotal=${item.product.price * item.quantity}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td th:text="${item.product.name}" data-label="å•†å“å" style="text-align: left;">å•†å“å</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td th:text="${#numbers.formatInteger(item.product.price, 1, 'COMMA')} + 'å††'" data-label="å˜ä¾¡" style="text-align: right;">å˜ä¾¡</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td th:text="${item.quantity}" data-label="æ•°é‡">æ•°é‡</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td th:text="${#numbers.formatInteger(subtotal, 1, 'COMMA')} + 'å††'" data-label="å°è¨ˆ" style="text-align: right;">å°è¨ˆ</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td data-label="æ“ä½œ">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form th:action="@{'/api/cart/' + ${item.id}}" method="post" style="margin: 0;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="hidden" name="_method" value="delete" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="delete-btn">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  å‰Šé™¤
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  </tr>

Â  Â  Â  Â  Â  Â  Â  Â  <!-- åˆè¨ˆé‡‘é¡ã®è¡Œã€‚totalPrice å¤‰æ•°ã‚’å®‰å…¨ã«å‚ç…§ -->
Â  Â  Â  Â  Â  Â  Â  Â  <tr th:if="${not #lists.isEmpty(cartItems)}" class="total-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td colspan="3" style="text-align: right; border: none;">åˆè¨ˆé‡‘é¡</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td th:text="${#numbers.formatInteger(totalPrice, 1, 'COMMA')} + 'å††'" colspan="2" style="text-align: right;">åˆè¨ˆé‡‘é¡</td>
Â  Â  Â  Â  Â  Â  Â  Â  </tr>

Â  Â  Â  Â  Â  Â  Â  Â  <tr th:if="${#lists.isEmpty(cartItems)}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td colspan="5" style="padding: 20px; text-align: center; color: #888; font-style: italic;">ã‚«ãƒ¼ãƒˆã«å•†å“ãŒã‚ã‚Šã¾ã›ã‚“...æ¨ã—æ´»ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼</td>
Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  </table>
Â  Â  Â  Â  </th:block>
Â  Â  </div>
Â  Â  <div style="text-align: center; margin-top: 30px;">
Â  Â  Â  Â  <a th:href="@{/cart/add}" class="btn">å•†å“ã‚’è¿½åŠ ã™ã‚‹</a>
Â  Â  Â  Â  <a th:href="@{/order/confirm}" class="btn primary">ãƒ¬ã‚¸ã«é€²ã‚€ï¼ˆæ³¨æ–‡ç¢ºå®šã¸ï¼‰</a>
Â  Â  </div>
Â  Â  </main>
</body>
</html>